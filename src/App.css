/* App.css — 480px column; FIXED header+footer; tabs on line; single scroller (no jump) */

/* Montserrat */
@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap");
*,*::before,*::after{box-sizing:border-box;font-family:"Montserrat",sans-serif!important}

/* Tokens */
:root{
  --frame-max:480px;
  --pad:20px;

  /* header = logo + tabs + 2px rule (adjust if you change header layout) */
  --header-h:118px;
  --footer-h:72px;

  --bg:#fff; --ink:#0b0b0b; --hair:#d9d9d9;
  --accent:#E29612; --ok:#2ecc71; --warn:#f4b400; --muted:#e6eedf; --bottom:#0a0a0a;
}

/* Lock page scroll; use only the inner scroller */
html,body,#root{height:100%}
html,body{margin:0;overflow:hidden}
body{
  color:var(--ink); background:#f4f4f4;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

/* Column shell */
.page{height:100dvh;display:flex;justify-content:center}
.app{
  width:100%; max-width:var(--frame-max); height:100dvh;
  display:flex; flex-direction:column; position:relative;
  background:var(--bg);
  border-left:1px solid #eee; border-right:1px solid #eee;
  border-radius:12px; box-shadow:0 8px 28px rgba(0,0,0,.06);
}

/* Only scroller; offset for fixed header; prevent scroll-jumps */
.viewSlot{
  flex:1;
  height:calc(100dvh - var(--footer-h));
  overflow:auto;
  overscroll-behavior:contain;
  -webkit-overflow-scrolling:touch;
  overflow-anchor:none;                 /* stop anchor jumps when DOM above changes */
  scrollbar-gutter:stable both-edges;   /* keep width when/without scrollbar */

  padding-top:var(--header-h);
  padding-bottom:0;
  padding-inline:max(env(safe-area-inset-left),12px) max(env(safe-area-inset-right),12px);
}
.band{padding:min(5vw,var(--pad))}

/* ===== FIXED HEADER (opaque, tabs on the rule) ===== */
.header{
  position:fixed; inset-inline:0; top:env(safe-area-inset-top);
  max-width:var(--frame-max); margin-inline:auto; z-index:1001;
  background:#fff; border-top-left-radius:12px; border-top-right-radius:12px;
}
.topBar{position:relative; padding:16px min(5vw,var(--pad)) 2px}
.topBar::after{content:""; position:absolute; left:0; right:0; bottom:0; height:2px; background:var(--hair)}

.brand-title{margin:0;font-size:28px;font-weight:900;letter-spacing:.5px;display:inline-block}
.topBar-actions{float:right}
.button-today{
  appearance:none;border:0;cursor:pointer;
  background:var(--accent);color:#1a1a1a;font-weight:800;
  padding:10px 14px;border-radius:10px;
}

/* Tabs — equal spacing, bottom-aligned on the 2px rule */
.topBar-nav{
  display:grid;grid-template-columns:repeat(4,1fr);align-items:end;
  margin-top:14px;padding-top:8px;
}
.tab{
  justify-self:center;appearance:none;border:0;background:transparent;cursor:pointer;
  padding:10px 14px;border-radius:8px 8px 0 0;
  font-weight:700;letter-spacing:.6px;color:#333;
  margin-bottom:-2px;
}
.tab.active{background:var(--accent);color:#111}

/* ===== Sections ===== */
.section{margin-top:24px}
.section-header{display:flex;align-items:center;gap:10px;font-size:28px;font-weight:900;letter-spacing:.4px}
.section-header .plus{
  width:28px;height:28px;border-radius:999px;display:grid;place-items:center;
  font-weight:900;background:var(--accent);color:#111;
}

/* ===== Tasks ===== */
.task{display:flex;align-items:center;gap:12px;padding:8px 0;font-size:20px}
.task .dot{width:20px;height:20px;border-radius:999px;background:var(--muted)}
.task .dot.ok{background:var(--ok)}
.task .dot.warn{background:var(--warn)}

/* ===== Reminders ===== */
.reminders-toggle{display:flex;align-items:center;gap:10px;font-size:28px;font-weight:900}
.reminders-item{display:flex;align-items:center;gap:12px;padding:8px 0;font-size:20px}
.reminders-item .dot{width:20px;height:20px;border-radius:999px;background:var(--warn)}

/* ===== Habits ===== */
.habits{margin-top:28px}
.habits .grid{width:100%;border-collapse:separate;border-spacing:12px 10px}
.habits .day-label{text-align:center;font-weight:800;letter-spacing:1px}
.habits .pill{
  width:36px;height:36px;border-radius:999px;display:grid;place-items:center;
  background:#e9eeef;color:#fff;font-weight:900;
}
.habits .pill.ok{background:var(--ok)}
.habits .pill.dim{opacity:.35}
.habits .nav{display:flex;gap:18px;justify-content:flex-end;margin:8px 0 0}
.habits .nav button{
  width:36px;height:36px;border-radius:10px;border:1px solid var(--hair);
  background:#fff;cursor:pointer;
}

/* ===== FIXED FOOTER (overlay) ===== */
.BottomBarFixed{
  position:fixed; inset-inline:0; bottom:env(safe-area-inset-bottom);
  max-width:var(--frame-max); margin-inline:auto; z-index:1000; background:transparent;
}
.BottomBarFixed__inner{
  height:var(--footer-h); background:var(--bottom); color:#f5f5f5;
  display:grid; grid-template-columns:repeat(4,1fr); gap:8px;
  padding:10px 16px; border-top:1px solid #111;
  border-top-left-radius:12px; border-top-right-radius:12px;
}
.bb-btn{
  appearance:none;border:0;background:transparent;cursor:pointer;
  padding:12px 6px;border-radius:12px;font-weight:800;letter-spacing:.6px;color:#cfcfcf;
}
.bb-btn[aria-selected="true"]{color:#fff;background:#1a1a1a;outline:2px solid #222}

/* Helpers */
.hide{display:none!important}
.center{display:grid;place-items:center}
.bold{font-weight:800}


/* PWA fullscreen */
html, body, #root { height: 100%; }
.page, .app { min-height: 100%; }

@supports (height: 100svh) {
  .page, .app { min-height: 100svh; }
}
@supports not (height: 100svh) {
  .page, .app { min-height: calc(var(--vh, 1vh) * 100); }
}

.pwa .app { padding-top: env(safe-area-inset-top); padding-bottom: env(safe-area-inset-bottom); }

/* Bottom bar gap fix */
.BottomBarFixed{
  position: fixed;
  inset-inline: 0;
  bottom: 0; /* anchor to real bottom; no safe-area offset here */
}
.BottomBarFixed__inner{
  min-height: var(--footer-h);
  padding-bottom: calc(10px + env(safe-area-inset-bottom)); /* keep above home indicator */
}

/* Full-height scroller in standalone PWA */
@media (display-mode: standalone){
  .viewSlot{ height: calc(100svh - var(--footer-h)); }
}

/* pwa-bottom-bar-fix */
.BottomBarFixed{position:fixed;left:0;right:0;bottom:env(safe-area-inset-bottom,0);z-index:1000;}
.BottomBarFixed__inner{
  height:72px;display:grid;grid-template-columns:repeat(4,1fr);gap:8px;
  padding:10px 16px calc(10px + env(safe-area-inset-bottom,0)) 16px;
  background:#0a0a0a;border-top:1px solid #111;border-top-left-radius:12px;border-top-right-radius:12px;
}
.page,.app{min-height:100svh;}
.viewSlot{min-height:calc(100svh - var(--footer-h,72px));}

/* pwa-bottom-gap-fix */
.BottomBarFixed{ position:fixed; left:0; right:0; bottom:0 !important; z-index:1000; }
.BottomBarFixed__inner{
  padding-bottom: calc(10px + env(safe-area-inset-bottom,0)) !important;
}
.viewSlot{ padding-bottom: calc(var(--footer-h,72px) + env(safe-area-inset-bottom,0)); }

/* pwa-bottom-gap-fix-2 */
.BottomBarFixed{
  position: fixed;
  left: 0; right: 0;
  bottom: 0 !important;
  background: var(--bottom) !important;
  padding-bottom: env(safe-area-inset-bottom, 0) !important;
  z-index: 1000;
}

.BottomBarFixed__inner{
  padding-bottom: 10px !important; /* keep interior spacing only */
}

@supports (height: 100svh){
  .page, .app { height: 100svh; }
}

/* pwa-bottom-gap-override */
.BottomBarFixed{
  bottom: 0 !important;                              /* sit flush with screen bottom */
  padding-bottom: env(safe-area-inset-bottom) !important; /* grow into safe area */
}
/* --- pwa bottom gap fix v3 --- */
:root{ --bb-h: 72px; } /* your bar's approx height */

.BottomBarFixed{
  position: fixed !important;
  left: 0; right: 0;
  bottom: 0 !important;                 /* normal browsers */
}

/* pad inside bar for the notch/safe area */
@supports (padding: env(safe-area-inset-bottom)){
  .BottomBarFixed{ padding-bottom: max(env(safe-area-inset-bottom), 0px) !important; }
  /* in standalone PWA, push the bar down into the home-indicator area */
  @media (display-mode: standalone){
    .BottomBarFixed{
      bottom: calc(-1 * env(safe-area-inset-bottom)) !important;
    }
  }
}

/* ensure page content never sits under the bar */
.page, .app, .viewSlot, main, .band, body {
  padding-bottom: calc(var(--bb-h) + env(safe-area-inset-bottom)) !important;
}

/* __BOTTOM_BAR_OFFSET_PATCH__ */
:root{
  --bb-h: 72px;         /* bar height */
  --bb-offset: 30px;    /* push DOWN by 30px */
}
.BottomBarFixed{
  position: fixed !important;
  left: 0; right: 0; bottom: 0 !important;
}
@supports (padding: env(safe-area-inset-bottom)){
  .BottomBarFixed{
    padding-bottom: max(env(safe-area-inset-bottom), 0px) !important;
  }
  /* When installed as a PWA, sink the bar into the home-indicator area */
  @media (display-mode: standalone){
    .BottomBarFixed{
      bottom: calc(-1 * env(safe-area-inset-bottom) - var(--bb-offset)) !important;
    }
  }
}
/* Keep content clear of the lowered bar */
.page, .app, .viewSlot, main, .band, body{
  padding-bottom: calc(var(--bb-h) + env(safe-area-inset-bottom) + var(--bb-offset)) !important;
}
/* __BOTTOM_BAR_OFFSET_PATCH__ END */

/* __BOTTOM_BAR_OFFSET_PATCH__ */
:root{
  --bb-h: 72px;         /* bar height */
  --bb-offset: 30px;    /* push DOWN by 30px */
}
.BottomBarFixed{
  position: fixed !important;
  left: 0; right: 0; bottom: 0 !important;
}
@supports (padding: env(safe-area-inset-bottom)){
  .BottomBarFixed{
    padding-bottom: max(env(safe-area-inset-bottom), 0px) !important;
  }
  @media (display-mode: standalone){
    .BottomBarFixed{
      bottom: calc(-1 * env(safe-area-inset-bottom) - var(--bb-offset)) !important;
    }
  }
}
.page, .app, .viewSlot, main, .band, body{
  padding-bottom: calc(var(--bb-h) + env(safe-area-inset-bottom) + var(--bb-offset)) !important;
}
/* __BOTTOM_BAR_OFFSET_PATCH__ END */
/* safe-area bottom bar */
:root{ --safe-bot: env(safe-area-inset-bottom, 0px); }

html, body, #root { height: 100%; }
.page { min-height: 100svh; }

/* Make the black bar cover the white iOS home-indicator area */
.BottomBarFixed{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  z-index: 9999;
  /* keep your existing padding + extend into safe area */
  padding-bottom: calc(12px + var(--safe-bot));
}

/* Keep content clear of the fixed bar */
.viewSlot, .band, main, .content, .page {
  padding-bottom: calc(72px + var(--safe-bot)); /* 72 = bar height; tweak to your bar */
}
